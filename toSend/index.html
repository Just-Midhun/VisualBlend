<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="initial-scale=1, width=device-width" />

    <link rel="stylesheet" href="./global.css" />
    <link rel="stylesheet" href="./index.css" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Mada:wght@300;400;500;600;700;900&display=swap"
    />
  </head>
  <body>
    <div class="desktop-1-parent">
      <div class="desktop-1">
        <img class="image-2-icon" alt="" src="A:\Projectsandreports\PROJECTS\FinalYearProject\locofy-react-project\2472497-bgremove.png" />

        <div class="desktop-1-child"></div>
        <img class="image-1-icon" alt="" src="A:\Projectsandreports\PROJECTS\FinalYearProject\locofy-react-project\user.png" />

        <img class="icon" alt="" src="A:\Projectsandreports\PROJECTS\FinalYearProject\locofy-react-project\visualblend.png" />

        <b class="visual-blend">
          <span class="visual-blend-txt-container">
            <p class="visual">Visual</p>
            <p class="visual">Blend</p>
          </span>
        </b>
        <div class="how-it-works"><a href="http://" style="text-decoration: none; color: inherit;">How it works?</a></div>
      

        <button class="login">Login</button>
        <div class="or">OR</div>
        <button class="rectangle-parent">
          <div class="group-child"></div>
          <div class="sign-up">Sign-up</div>
        </button>
        <div class="any-frauds-any-container">
          <span class="visual-blend-txt-container">
            <p class="any-frauds-any">Any Frauds? Any theft?<br>Have a face.?</p>
            <p class="any-frauds-any">Well donâ€™t worry!!</p>
            <p style="color:#990033";>
              Describe or provide a sketch and let us check for you.
            </p>
          </span>
        </div>
        <div class="note-matching-depends-container">
          <span class="visual-blend-txt-container">
            <span class="note">NOTE: </span>
            <span>Matching depends on availability in<br>database.</span>
          </span>
        </div>
        <div class="desktop-1-item"></div>
        <div class="desktop-1-inner"></div>

        <div class="desktop-1-inner"></div>
        <div class="desktop-1-child1"></div>
        <div class="desktop-1-child2"></div>
        <div class="desktop-1-child3"></div>

        <div class="box"></div>

        <div class="rectangle-div"></div>
        <div class="well-if-you-container">
          <span>Well, If you got both, </span>
          <b>better results can be seen.</b>
        </div>
        <div class="or-drop-a-container">
          <p class="visual">or drop a file,</p>
          <p class="paste-image-or">paste image or URL</p>
        </div>
        <div class="convert-sketches-to-images-and-parent">
          <div class="convert-sketches-to">
            Convert Sketches to Images and match.
          </div>
          <b class="sketch-tool">Sketch Tool</b>
          <div class="only-if-you">Only if you have a valid sketch.</div>
        </div>
        <div class="convert-descriptions-to-images-parent">
          <div class="convert-sketches-to">
            Convert Descriptions to Images and match.
          </div>
          <b class="sketch-tool">Description Tool</b>
          <div class="only-if-you">
            Cross validate the description before trying.
          </div>
          <div class="group-item"></div>
          <div class="group-inner"></div>
          <div class="group-child1" contenteditable="true"></div>
          <div class="enter-your-description">Enter your description</div>
        </div>
        <div class="rectangle-group">
          <div class="group-child2"></div>
          <div class="upload-sketch">Upload Sketch</div>
        </div>
        <div class="rectangle-group">
          <div class="group-child2" id="rectangle7"></div>
          <div class="upload-sketch">Upload Sketch</div>
        </div>
        <div class="group-div">
          <div class="group-child4"></div>
          <button class="take-both">Take Both</button>
        </div>
        <div class="rectangle-parent1">
          <div class="group-child5"></div>
          <button class="check-with-sketch">Check with Sketch.</button>
        </div>
        <div class="rectangle-parent2">
          <div class="group-child6" id="rectangle10"></div>
          <button class="check-with-text">Check with Text.</button>
        </div>
        <div class="desktop-1-child8"></div>
        <div class="desktop-1-child9"></div>
        <div class="desktop-1-child10"></div>
        <div class="desktop-1-child11"></div>
        <div class="desktop-1-child12"></div>
        <div class="desktop-1-child13"></div>
        <div class="desktop-1-child14"></div>
        <div class="desktop-1-child15"></div>
        <div class="desktop-1-child16"></div>
        <div class="desktop-1-child17"></div>
      </div>
    </div>

    <div id="frameContainer" class="popup-overlay" style="display: none">
      <div class="group-parent">
        <div class="rectangle-parent3">
          <div class="group-child7"></div>
          <b class="upload-sketch2">Upload Sketch</b>
          <div class="upload-an-image">Upload an image from your computer</div>
          <div class="rectangle-parent4">
            <div class="group-child8"></div>
            
            
            <label for="fileInput" class="choose-file">Choose file</label>
          <input type="file" id="fileInput" accept=".jpg, .jpeg, .png" onchange="handleFileSelect()" />
          <div id="selectedFileName"></div>
          
        
        </div>
          <img
            class="samplepic5-1-icon"
            alt=""
            src="./face.jpg"
          />

          <div class="group-child9"></div>
          <div class="images-must-be">
            Images must be in either jpg, jpeg or png format
          </div>
        </div>
        <img
          class="mark-38217-960-720-1-icon"
          alt=""
          src="A:\Projectsandreports\PROJECTS\FinalYearProject\locofy-react-project\check-mark.png"
        />

        <div class="uploaded-image-will">
          Uploaded image will be resized to fit within
        </div>
        <div class="rectangle-parent5" id="popupgroupContainer2">
          <div class="group-child10"></div>
          <div class="continue " onclick="continueProcessing()">Continue</div>
        </div>
      </div>
    </div>

    <script>
      function handleFileSelect() {
        const fileInput = document.getElementById('fileInput');
        const selectedFileName = document.getElementById('selectedFileName');
        const sampleImage = document.querySelector('.samplepic5-1-icon');

        if (fileInput.files.length > 0) {
          const fileName = fileInput.files[0].name;
          selectedFileName.innerHTML = `Selected File: ${fileName}`;

          const file = fileInput.files[0];
          const reader = new FileReader();

          reader.onload = function (e) {
          sampleImage.src = e.target.result;
          
          };    
          
          reader.readAsDataURL(file);

        } else {
          selectedFileName.innerHTML = '';

          sampleImage.src = '';
        }
      }

      function continueProcessing() {
  const selectedImage = document.querySelector('.samplepic5-1-icon');

  if (!selectedImage || !selectedImage.src) {
    alert('Please select a file.');
    return;
  }

  const imageUrl = selectedImage.src;

  fetch(imageUrl)
    .then(response => response.blob())
    .then(blob => {
      const formData = new FormData();
      formData.append('file', blob, 'image.png');

      return fetch('http://localhost:8000/process_image/', {
        method: 'POST',
        body: formData,
      });
    })
    .then(response => {
      if (!response.ok) {
        throw new Error(`HTTP error! Status: ${response.status}`);
      }
      return response.json();
    })
    .then(data => {
      selectedImage.src = data.result;
    })
    .catch(error => console.error('Error:', error));
}



      var popupgroupContainer2 = document.getElementById("popupgroupContainer2");
      if (popupgroupContainer2) {
        popupgroupContainer2.addEventListener("click", function (e) {
          // Please sync "Desktop - 5" to the project
        });
      }
      
      var rectangle7 = document.getElementById("rectangle7");
      if (rectangle7) {
        rectangle7.addEventListener("click", function () {
          var popup = document.getElementById("frameContainer");
          if (!popup) return;
          var popupStyle = popup.style;
          if (popupStyle) {
            popupStyle.display = "flex";
            popupStyle.zIndex = 100;
            popupStyle.backgroundColor = "rgba(113, 113, 113, 0.3)";
            popupStyle.alignItems = "center";
            popupStyle.justifyContent = "center";
          }
          popup.setAttribute("closable", "");
      
          var onClick =
            popup.onClick ||
            function (e) {
              if (e.target === popup && popup.hasAttribute("closable")) {
                popupStyle.display = "none";
              }
            };
          popup.addEventListener("click", onClick);
        });
      }
      
      var rectangle10 = document.getElementById("rectangle10");
      if (rectangle10) {
        rectangle10.addEventListener("click", function (e) {
          // Please sync "Desktop - 3" to the project
        });
      }
      </script>
  </body>
</html>
